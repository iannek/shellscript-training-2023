# 演習概要
- 演習内容
  - シェルスクリプトを作成して、フォアグラウンド実行、バックグラウンド実行の切り替えを行う。

- 演習目標
  - バックグラウンドの実行方法、確認方法、終了方法を理解する。
  - 以下のコマンドの使い方を理解する。
    - jobs
    - kill
    - fg
    - bg

# 演習内容

## 課題1. ループ処理を行うシェルスクリプトを作成してバックグラウンドで実行
以下の処理を行うシェルスクリプトのファイル(tr_11_1.sh)を作成してバックグラウンドで実行する。  
   - 繰り返しループを書いて、5秒ごとにloop.txtに"loop"と追記出力する。

## 課題2. tr_11_1.shをバックグラウンドで実行　→　フォアグラウンド実行に切り替え
課題1で作成・実行したシェルスクリプトに関して以下を順に行う。
   - 課題1でバックグラウンドで実行したシェルスクリプトをフォアグラウンド実行に切り替える。  
     その後、フォアグラウンド実行している処理を、ターミナル上で`ctrl + c`とキーボードで押して停止する。
   - シェルスクリプトをフォアグラウンド実行してからバックグラウンド実行に切り替える。  
     その後、バックグラウンド実行している処理をkillコマンドを使って停止する。

# ヒント
<details><summary>講義資料参考ページ</summary><div>

- フォアグラウンド実行とバックグラウンド実行
  - p29
</div></details>

# 演習回答例  

<details><summary>解答例</summary><div>

## 課題1. ループ処理を行うシェルスクリプトを作成してバックグラウンドで実行 解答例  
シェルスクリプトファイル"tr_11_1.sh"をエディタから作成し、下記の内容を書き込む。  

``` sh
#!/bin/bash

while true
do
  echo "loop" >> loop.txt
  sleep 5
done

```
<details><summary>課題1のシェルスクリプトの内容解説</summary><div>

- `>>　ファイル名` …　ファイルに追記で出力したい場合はこのように記載する。講義資料p87を参照。

</div></details>


tr_11_1.shをバックグラウンドで実行する。

```
bash tr_11_1.sh &
```

jobsコマンドを実行して、バックグラウンドで実行されていることとジョブ番号を確認。  

```
jobs
```

jobsコマンド実行例  
```
[1]+  Running                 bash tr_11_1.sh &
```

### 課題2. tr_11_1.shをバックグラウンドで実行　→　フォアグラウンド実行に切り替え 解答例  

fgコマンドを使用してバックグラウンドジョブをフォアグラウンドに切り替える。  

```
fg 1
```

フォアグラウンド実行されていることを確認したら、ターミナル上で`ctrl + c`とキーボードを押して、シェルスクリプトを停止する。  

再度jobsコマンドを実行して、何も表示されないことを確認。

### tr_11_1.shをフォアグラウンドで実行　→　バックグラウンド実行に切り替え

tr_11_1.shをフォアグラウンドで実行する。  

```
bash tr_11_1.sh
```

5秒ごとにloop.txtに"loop"が追記されていることをエディタからloop.txtを開いて確認。  

ターミナル上で`ctrl + z`とキーボードで押してジョブを一時停止する。

jobsコマンドを実行して、一時停止になっていることとジョブ番号を確認。  

```
jobs
```

jobsコマンド実行例  
```
[1]+  Stopped                 bash tr_11_1.sh
```

bgコマンドを実行して一時呈しているジョブをバックグラウンド実行する。  

```
bg 1
```

jobsコマンドを実行して、バックグラウンドで実行されていることとジョブ番号を確認する。  

```
jobs
```

jobsコマンド実行例  
```
[1]+  Running                 bash tr_11_1.sh &
```

killコマンドを実行して、バックグラウンドで実行しているシェルスクリプトを停止する。  

```
kill %1
```

再度jobsコマンドを実行して、何も表示されないことを確認。  

</div></details>